<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Bartender Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #1a120b;
            --secondary-dark: #3a2e28;
            --accent-gold: #d4af37;
            --accent-light-gold: #f9d342;
            --text-light: #f5f5dc;
            --text-muted: #aaa08f;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            background-size: 400% 400%;
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
            animation: gradientShift 15s ease infinite;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(212, 175, 55, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 20%);
            pointer-events: none;
            z-index: -1;
        }
        
        .glass-effect {
            background: rgba(10, 8, 6, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 20px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .vertical-nav {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 18px;
            padding: 20px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 18px 24px;
            margin: 12px 0;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.03);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .nav-item:hover {
            background: rgba(212, 175, 55, 0.15);
            transform: translateX(5px);
            border-left: 4px solid var(--accent-gold);
        }
        
        .nav-item.active {
            background: rgba(212, 175, 55, 0.2);
            border-left: 4px solid var(--accent-gold);
            transform: translateX(5px);
        }
        
        .nav-item i {
            font-size: 1.5rem;
            margin-right: 15px;
            width: 30px;
            text-align: center;
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .card-hover::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(212, 175, 55, 0.2),
                transparent
            );
            transition: 0.5s;
        }
        
        .card-hover:hover::before {
            left: 100%;
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.5),
                0 0 20px rgba(212, 175, 55, 0.3);
        }
        
        .golden-button {
            background: linear-gradient(45deg, var(--accent-gold), var(--accent-light-gold));
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            color: var(--secondary-dark);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            font-size: 1.1rem;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .golden-button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            transition: 0.5s;
            z-index: -1;
        }
        
        .golden-button:hover::before {
            left: 100%;
        }
        
        .golden-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
            letter-spacing: 1px;
        }
        
        .game-card {
            background: rgba(58, 46, 40, 0.7);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 18px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .game-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-gold), var(--accent-light-gold));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }
        
        .game-card:hover::before {
            transform: scaleX(1);
        }
        
        .game-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--accent-gold), var(--accent-light-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .floating {
            animation: floating 4s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-12px); }
            100% { transform: translateY(0px); }
        }
        
        .dice {
            width: 70px;
            height: 70px;
            background: linear-gradient(145deg, #2c221f, #1a120b);
            border: 2px solid var(--accent-gold);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .dice::before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            pointer-events: none;
        }
        
        .card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%);
            color: #333;
            border-radius: 12px;
            box-shadow: 
                0 10px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 48%, rgba(0,0,0,0.1) 50%, transparent 52%);
            z-index: 1;
        }
        
        .section-content {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }
        
        .section-content.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        .hidden {
            display: none;
        }
        
        .player-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 12px;
            margin: 8px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 4px solid var(--accent-gold);
            transition: all 0.3s ease;
        }
        
        .player-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .dice-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .result-display {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.2);
            margin: 20px 0;
        }
        
        .counter-display {
            font-size: 1.5rem;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
        }
        
        .counter-btn {
            background: var(--accent-gold);
            color: var(--secondary-dark);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .counter-btn:hover {
            transform: scale(1.1);
            background: var(--accent-light-gold);
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .game-header::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 15px;
            color: var(--text-light);
            font-size: 1rem;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        
        .select-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 15px;
            color: var(--text-light);
            font-size: 1rem;
            width: 100%;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d4af37' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
        }
        
        .select-field:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }
        
        .footer-version {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 20px;
        }
        
        .shake {
          animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .pulse-winning {
          animation: pulse-winning 2s infinite;
        }

        @keyframes pulse-winning {
          0% { transform: scale(1); }
          50% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="glass-effect w-full max-w-6xl mx-auto p-8 relative z-10">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Vertical Navigation (Logo Concept) -->
            <div class="lg:w-1/4">
                <div class="vertical-nav h-full">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold mb-2 floating">
                            <i class="fas fa-beer text-4xl text-[#d4af37] mb-2 block"></i>
                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-yellow-600 text-2xl">Bartender</span>
                        </h1>
                        <p class="text-gray-400 text-sm">ç²¾ç·»é…’å§éŠæˆ²</p>
                    </div>
                    
                    <div class="nav-item active" onclick="showSection('home')" id="nav-home">
                        <i class="fas fa-home"></i>
                        <span>ä¸»é¸å–®</span>
                    </div>
                    <div class="nav-item" onclick="showSection('dice')" id="nav-dice">
                        <i class="fas fa-dice"></i>
                        <span>éª°å­æ¯”å¤§å°</span>
                    </div>
                    <div class="nav-item" onclick="showSection('ace')" id="nav-ace">
                        <i class="fas fa-dragon"></i>
                        <span>å°„é¾é–€</span>
                    </div>
                    <div class="nav-item" onclick="showSection('wheel')" id="nav-wheel">
                        <i class="fas fa-circle-notch"></i>
                        <span>å¹¸é‹è½‰ç›¤</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Content Area -->
            <div class="lg:w-3/4">
                <!-- Home Section -->
                <div id="home" class="section-content active">
                    <div class="text-center mb-10">
                        <h1 class="text-4xl md:text-5xl font-bold mb-4">ç²¾é¸éŠæˆ²</h1>
                        <p class="text-lg text-gray-300 mb-8">ç‚ºæœ‹å‹èšæœƒç²¾å¿ƒæŒ‘é¸çš„ç¶“å…¸é…’å§éŠæˆ²</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                        <div class="game-card card-hover pulse" onclick="showSection('dice')">
                            <div class="game-icon">
                                <i class="fas fa-dice-d20"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3">éª°å­æ¯”å¤§å°</h3>
                            <p class="text-gray-300 mb-4">èª¿æ•´éª°å­æ•¸é‡ï¼Œé«”é©—çœŸå¯¦ç‰©ç†æ–éª°æ¨‚è¶£</p>
                            <div class="text-center">
                                <span class="inline-block px-4 py-2 bg-gray-800 rounded-full text-sm">ç¶“å…¸éŠæˆ²</span>
                            </div>
                        </div>
                        
                        <div class="game-card card-hover pulse" onclick="showSection('ace')" style="animation-delay: 0.2s;">
                            <div class="game-icon">
                                <i class="fas fa-chess-rook"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3">å°„é¾é–€</h3>
                            <p class="text-gray-300 mb-4">æ’²å…‹ç‰Œåˆ¤å®šï¼Œåˆºæ¿€çš„ä¸‹æ³¨é«”é©—</p>
                            <div class="text-center">
                                <span class="inline-block px-4 py-2 bg-gray-800 rounded-full text-sm">ç­–ç•¥éŠæˆ²</span>
                            </div>
                        </div>
                        
                        <div class="game-card card-hover pulse" onclick="showSection('wheel')" style="animation-delay: 0.4s;">
                            <div class="game-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3">å¹¸é‹è½‰ç›¤</h3>
                            <p class="text-gray-300 mb-4">è‡ªè¨‚ç©å®¶ï¼Œå…¬å¹³å…¬æ­£çš„æŠ½çæ©Ÿåˆ¶</p>
                            <div class="text-center">
                                <span class="inline-block px-4 py-2 bg-gray-800 rounded-full text-sm">æ´¾å°éŠæˆ²</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <p class="text-gray-400 italic mb-8 text-lg">ã€Œä¸€æ¯æ•¬å‹èª¼ï¼Œä¸€æ¯æ•¬æ­¡æ¨‚ï¼Œè®“éŠæˆ²ä¸²èµ·ç¾å¥½æ™‚å…‰ã€</p>
                        <div class="max-w-md mx-auto">
                            <button class="golden-button w-full py-5 text-xl pulse">
                                <i class="fas fa-play-circle mr-3"></i>é–‹å§‹æ¢ç´¢éŠæˆ²ä¸–ç•Œ
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Dice Game Section -->
                <div id="dice" class="section-content hidden">
                    <div class="game-header">
                        <h2 class="text-3xl font-bold">ğŸ² éª°å­æ¯”å¤§å°</h2>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="flex items-center justify-center mb-8">
                            <button onclick="changeDiceCount(-1)" class="counter-btn">
                                <i class="fas fa-minus"></i>
                            </button>
                            <div class="counter-display mx-6">
                                <span id="diceCount">éª°å­æ•¸é‡: 2</span>
                            </div>
                            <button onclick="changeDiceCount(1)" class="counter-btn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        
                        <div id="diceContainer" class="dice-container"></div>
                        
                        <button onclick="rollDice()" class="golden-button px-10 py-4 text-xl mb-6">
                            <i class="fas fa-dice mr-3"></i>æ–éª°å­
                        </button>
                        
                        <div id="diceResult" class="result-display w-full max-w-md"></div>
                    </div>
                </div>
                
                <!-- Ace in the Hole Game Section -->
                <div id="ace" class="section-content hidden">
                    <div class="game-header">
                        <h2 class="text-3xl font-bold">ğŸ‰ å°„é¾é–€ (Ace in the Hole)</h2>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="flex justify-around w-full max-w-md mb-8">
                            <div id="leftCard" class="text-center">
                                <div class="card w-20 h-32 mx-auto flex items-center justify-center text-3xl font-bold shadow-lg">?</div>
                                <p class="mt-3 text-lg">å·¦æŸ±</p>
                            </div>
                            <div id="rightCard" class="text-center">
                                <div class="card w-20 h-32 mx-auto flex items-center justify-center text-3xl font-bold shadow-lg">?</div>
                                <p class="mt-3 text-lg">å³æŸ±</p>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap justify-center gap-4 mb-8">
                            <button onclick="dealCards()" class="golden-button px-8 py-3">
                                <i class="fas fa-hand-sparkles mr-2"></i>ç™¼ç‰Œ
                            </button>
                            <button onclick="bet(true)" class="golden-button px-8 py-3">
                                <i class="fas fa-coins mr-2"></i>ä¸‹æ³¨
                            </button>
                            <button onclick="bet(false)" class="golden-button px-8 py-3">
                                <i class="fas fa-times-circle mr-2"></i>ä¸ä¸‹æ³¨
                            </button>
                        </div>
                        
                        <div id="aceResult" class="result-display w-full max-w-md"></div>
                    </div>
                </div>
                
                <!-- Lucky Wheel Section -->
                <div id="wheel" class="section-content hidden">
                    <div class="game-header">
                        <h2 class="text-3xl font-bold">ğŸ¡ å¹¸é‹è½‰ç›¤</h2>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="w-full max-w-md mb-8">
                            <input type="text" id="playerName" placeholder="è¼¸å…¥ç©å®¶æš±ç¨±" class="input-field mb-4">
                            <select id="playerEmoji" class="select-field">
                                <option value="">é¸æ“‡ä½ çš„å‹•ç‰©</option>
                                <option value="ğŸ¶">ğŸ¶ ç‹—ç‹—</option>
                                <option value="ğŸ±">ğŸ± è²“å’ª</option>
                                <option value="ğŸ­">ğŸ­ è€é¼ </option>
                                <option value="ğŸ¹">ğŸ¹ å¤©ç«ºé¼ </option>
                                <option value="ğŸ°">ğŸ° å…”å­</option>
                                <option value="ğŸ¦Š">ğŸ¦Š ç‹ç‹¸</option>
                                <option value="ğŸ»">ğŸ» ç†Šç†Š</option>
                                <option value="ğŸ¼">ğŸ¼ ç†Šè²“</option>
                                <option value="ğŸ¦">ç…å­</option>
                                <option value="ğŸ¯">è€è™</option>
                                <option value="ğŸ¦„">ğŸ¦„ ç¨è§’ç¸</option>
                                <option value="/owl">ğŸ¦‰ è²“é ­é·¹</option>
                                <option value="ğŸ¸">é’è›™</option>
                                <option value="ğŸµ">ğŸµ çŒ´å­</option>
                                <option value="ğŸ”">ğŸ” é›é›</option>
                                <option value="ğŸ§">ä¼éµ</option>
                            </select>
                        </div>
                        
                        <button onclick="addPlayer()" class="golden-button px-10 py-3 mb-8">
                            <i class="fas fa-user-plus mr-3"></i>æ–°å¢ç©å®¶
                        </button>
                        
                        <div id="wheelPlayers" class="w-full max-w-md mb-8">
                            <h3 class="text-xl font-semibold mb-4 text-center">åƒèˆ‡ç©å®¶ (<span id="playerCount">0</span>)</h3>
                            <div class="bg-gray-800 bg-opacity-30 rounded-xl p-4 max-h-60 overflow-y-auto">
                                <div id="playersList" class="space-y-3">
                                    <p class="text-gray-400 text-center py-8">å°šç„¡ç©å®¶ï¼Œè«‹æ–°å¢ç©å®¶</p>
                                </div>
                            </div>
                        </div>
                        
                        <button onclick="spinWheel()" class="golden-button px-10 py-4 text-xl mb-6">
                            <i class="fas fa-sync-alt mr-3 animate-spin-once"></i>æ—‹è½‰è½‰ç›¤
                        </button>
                        
                        <div id="wheelResult" class="result-display w-full max-w-md"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-version">
            <p>Mini Bartender Game v1.0.0 | yenyenclawbot</p>
        </div>
    </div>

    <script>
        // Global variables
        let diceCount = 2;
        let players = [];
        let wheelSpinning = false;
        
        // Initialize sections
        document.querySelectorAll('.section-content').forEach(section => {
            section.classList.add('hidden');
        });
        document.getElementById('home').classList.remove('hidden');
        
        // Initialize nav buttons
        document.querySelectorAll('.nav-item').forEach(button => {
            button.classList.remove('active');
        });
        document.getElementById('nav-home').classList.add('active');

        // Show selected section with animation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.remove('active');
                setTimeout(() => {
                    section.classList.add('hidden');
                }, 300);
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-item').forEach(button => {
                button.classList.remove('active');
            });
            
            // Add active class to clicked nav button
            document.getElementById(`nav-${sectionId}`).classList.add('active');
            
            // Show selected section after a delay to allow for animation
            setTimeout(() => {
                document.getElementById(sectionId).classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById(sectionId).classList.add('active');
                }, 10);
            }, 300);
        }

        // Dice Game Functions
        function playDiceSound() {
          // Create audio context
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          
          // Create oscillator and gain node
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          // Connect nodes
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          // Configure sound parameters (pleasant chime)
          oscillator.type = 'sine';
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime); // Start frequency
          oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.3); // End frequency
          
          // Configure volume envelope
          gainNode.gain.setValueAtTime(0, audioContext.currentTime);
          gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01); // Quick attack
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3); // Decay
          
          // Play and stop
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.3);
        }
        
        function changeDiceCount(change) {
            diceCount = Math.max(1, Math.min(6, diceCount + change));
            document.getElementById('diceCount').textContent = `éª°å­æ•¸é‡: ${diceCount}`;
        }

        function rollDice() {
            playDiceSound(); // Play sound effect
            const container = document.getElementById('diceContainer');
            container.innerHTML = '';
            
            let total = 0;
            for (let i = 0; i < diceCount; i++) {
                const die = document.createElement('div');
                die.className = 'dice';
                die.textContent = '?';
                die.style.opacity = '0.7';
                container.appendChild(die);
                
                // Animation effect
                setTimeout(() => {
                    const value = Math.floor(Math.random() * 6) + 1;
                    die.textContent = value;
                    total += value;
                    
                    // Add animation effect
                    die.style.transition = 'all 0.3s ease';
                    die.style.transform = 'scale(1.2)';
                    die.style.opacity = '1';
                    setTimeout(() => {
                        die.style.transform = 'scale(1)';
                    }, 200);
                }, i * 300);
            }
            
            setTimeout(() => {
                document.getElementById('diceResult').innerHTML = `<div class="flex items-center justify-center"><i class="fas fa-calculator text-2xl mr-3"></i><span>ç¸½é»æ•¸: ${total}</span></div>`;
            }, diceCount * 300);
        }

        // Ace in the Hole Functions
        function dealCards() {
            const leftCard = Math.floor(Math.random() * 13) + 1;
            const rightCard = Math.floor(Math.random() * 13) + 1;
            
            document.querySelector('#leftCard div').textContent = leftCard;
            document.querySelector('#rightCard div').textContent = rightCard;
            
            document.getElementById('aceResult').textContent = '';
        }

        function bet(isBet) {
            const leftValue = parseInt(document.querySelector('#leftCard div').textContent);
            const rightValue = parseInt(document.querySelector('#rightCard div').textContent);
            
            if (isNaN(leftValue) || isNaN(rightValue)) {
                document.getElementById('aceResult').innerHTML = `<div class="flex items-center justify-center text-red-400"><i class="fas fa-exclamation-triangle mr-3"></i>è«‹å…ˆç™¼ç‰Œï¼</div>`;
                return;
            }
            
            const thirdCard = Math.floor(Math.random() * 13) + 1;
            
            let result = '';
            let resultClass = '';
            if (thirdCard > Math.min(leftValue, rightValue) && thirdCard < Math.max(leftValue, rightValue)) {
                if (isBet) {
                    result = 'ğŸ‰ æ­å–œä¸­çï¼';
                    resultClass = 'text-green-400';
                } else {
                    result = 'ğŸ˜¢ å¯æƒœæ²’ä¸‹æ³¨';
                    resultClass = 'text-yellow-400';
                }
            } else {
                if (isBet) {
                    result = 'ğŸ˜¢ å¯æƒœæ²’ä¸­';
                    resultClass = 'text-red-400';
                } else {
                    result = 'ğŸ˜Š æ˜æ™ºçš„é¸æ“‡';
                    resultClass = 'text-blue-400';
                }
            }
            
            const resultElement = document.getElementById('aceResult');
            resultElement.innerHTML = `<div class="flex items-center justify-center ${resultClass}"><i class="fas fa-star mr-3"></i>${result} <span class="ml-2">(ç¬¬ä¸‰å¼µç‰Œ: ${thirdCard})</span></div>`;
            
            // Add shake animation to result element on win/loss
            if (resultClass.includes('red') || resultClass.includes('green')) {
              resultElement.classList.add('shake');
              setTimeout(() => {
                resultElement.classList.remove('shake');
              }, 500);
            }
        }

        // Lucky Wheel Functions
        function addPlayer() {
            const nameInput = document.getElementById('playerName');
            const emojiSelect = document.getElementById('playerEmoji');
            
            if (nameInput.value.trim() === '' || emojiSelect.value === '') {
                alert('è«‹è¼¸å…¥ç©å®¶æš±ç¨±ä¸¦é¸æ“‡å‹•ç‰©ï¼');
                return;
            }
            
            players.push({
                name: nameInput.value.trim(),
                emoji: emojiSelect.value
            });
            
            nameInput.value = '';
            emojiSelect.value = '';
            
            updatePlayerList();
        }

        function updatePlayerList() {
            const container = document.getElementById('playersList');
            const countElement = document.getElementById('playerCount');
            
            if (players.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center py-8">å°šç„¡ç©å®¶ï¼Œè«‹æ–°å¢ç©å®¶</p>';
                countElement.textContent = '0';
                return;
            }
            
            container.innerHTML = '';
            players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player-item';
                playerDiv.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-2xl mr-3">${player.emoji}</span>
                        <span class="font-medium">${player.name}</span>
                    </div>
                    <button onclick="removePlayer(${index})" class="text-red-500 hover:text-red-400 p-2">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                container.appendChild(playerDiv);
            });
            
            countElement.textContent = players.length;
        }

        function removePlayer(index) {
            players.splice(index, 1);
            updatePlayerList();
        }

        function spinWheel() {
            if (players.length < 2) {
                document.getElementById('wheelResult').innerHTML = `<div class="flex items-center justify-center text-red-400"><i class="fas fa-exclamation-triangle mr-3"></i>è‡³å°‘éœ€è¦å…©ä½ç©å®¶ï¼</div>`;
                return;
            }
            
            if (wheelSpinning) return;
            
            wheelSpinning = true;
            const resultElement = document.getElementById('wheelResult');
            resultElement.innerHTML = '<div class="flex items-center justify-center text-yellow-400"><i class="fas fa-spinner fa-spin mr-3"></i>è½‰ç›¤æ—‹è½‰ä¸­...</div>';
            
            // Simulate spinning animation
            let spins = 0;
            const maxSpins = 20;
            const interval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * players.length);
                resultElement.innerHTML = `<div class="flex items-center justify-center text-yellow-400"><i class="fas fa-sync-alt mr-3"></i>ç•¶å‰: ${players[randomIndex].emoji} ${players[randomIndex].name}</div>`;
                spins++;
                
                if (spins >= maxSpins) {
                    clearInterval(interval);
                    const winnerIndex = Math.floor(Math.random() * players.length);
                    const winner = players[winnerIndex];
                    resultElement.innerHTML = `<div class="flex items-center justify-center text-yellow-400"><i class="fas fa-crown text-2xl mr-3"></i><span id="winner-name" class="text-2xl">ğŸ† ç²å‹è€…: ${winner.emoji} ${winner.name}</span></div>`;
                    
                    // Add pulse animation to winner's name
                    const winnerNameElement = document.getElementById('winner-name');
                    winnerNameElement.classList.add('pulse-winning');
                    setTimeout(() => {
                      winnerNameElement.classList.remove('pulse-winning');
                    }, 2000); // Duration of pulse animation
                    
                    wheelSpinning = false;
                }
            }, 100);
        }
        
        // Add animation for spin button
        document.addEventListener('DOMContentLoaded', function() {
            const style = document.createElement('style');
            style.textContent = `
                .animate-spin-once {
                    animation: spinOnce 0.5s ease;
                }
                
                @keyframes spinOnce {
                    0% { transform: rotate(0); }
                    100% { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
